
<!DOCTYPE html>
<html>
<body>

<button onclick="login()">Login</button><br><br>
<input id="file" name="file" type="file" />	
<!--<input id="fileUploadControl" name="fileUploadControl" type="file" onchange="openfile(event)" />-->
	
<!--<button onclick="launch2()"> save to onedrive</button><br><br>-->

<button onclick="logout()">Logout</button>
<script type="text/javascript" src="https://js.live.net/v7.0/OneDrive.js"></script>
<script type="text/javascript">
	

function login() 
{
	window.alert("login() in execution ");
  	window.open("https://login.live.com/oauth20_authorize.srf?client_id=eb8f333c-fc44-4183-b60b-c4c8c50e2509&scope=wl.signin%20wl.basic%20wl.offline_access&response_type=token&redirect_uri=https%3A%2F%2Fljj913574.github.io%2Fsample1%2Ftest");	
	
	window.alert("welcome");

	var odOptions = {
			  //clientId: "eb8f333c-fc44-4183-b60b-c4c8c50e2509",
			  action: "save",
			  sourceInputElementId: "fileUploadControl",
			  sourceUri: "",
			  fileName: "fil.txt",
			  openInNewWindow: true,
			  advanced: {},
			  success: function(files) { window.alert("success()");console.log('success');},
			  progress: function(p) { window.alert("uploading is in progress"); console.log("2"); },
			  cancel: function() {console.log("3"); },
			  error: function(e) { console.log(e); }
			};

			console.log("6");
		      OneDrive.save(odOptions);
	}

        var openfile= function(event){

             var input= event.target;
             var reader=new FileReader();

              var save = function (dataURL){
                       data=dataURL;
                      
                    };
   
              
              reader.onload= function() {
                save(reader.result);
                console.log("1");
              }
              reader.readAsDataURL(input.files[0]);
	}
}
 

function logout() 
{	window.alert("logout() in execution ");
	window.open("https://login.live.com/oauth20_logout.srf?client_id=eb8f333c-fc44-4183-b60b-c4c8c50e2509&redirect_uri=https%3A%2F%2Fljj913574.github.io%2Fsample1%2Ftest");	
}	
 </script>
 </html>

